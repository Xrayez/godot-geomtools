#!/usr/bin/env python
Import('env')
Import('env_geomtools')
import os

boolean_backend = env_geomtools["geomtools_polyboolean"]
# offset_backend = env_geomtools["geomtools_polyoffset"]
# decomp_backend = env_geomtools["geomtools_polydecomp"]

source_dirs = [
    ".",
    "backends/boolean/%s" % (boolean_backend),
    # "backends/offset/%s" % (offset_backend),
    # "backends/decomp/%s" % (decomp_backend)
]
backends_enabled = [
    "// THIS FILE IS GENERATED, DO NOT EDIT!",
    "#ifndef GEOMETRY_POLY_BACKENDS_H",
    "#define GEOMETRY_POLY_BACKENDS_H",
    "#include \"polytools/backends/boolean/%s/poly_boolean_%s.h\"" % (boolean_backend, boolean_backend),
    # "#include \"polytools/backends/offset/%s/poly_offset_%s.h\"" % (offset_backend, offset_backend),
    # "#include \"polytools/backends/decomp/%s/poly_decomp_%s.h\"" % (decomp_backend, decomp_backend),
    "#endif // GEOMETRY_POLY_BACKENDS_H"
]
env_geomtools.Textfile(target="poly_backends.gen.h", source=backends_enabled)

sources = [Glob(d + "/" + "*.cpp") for d in source_dirs]
env_geomtools.add_source_files(env_geomtools.modules_sources, sources)
